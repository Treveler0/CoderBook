
<!DOCTYPE html>

<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <link rel="stylesheet" type="text/css" href="../../../../css/read.css" />
    <title>Coder Book menu</title>
    <script type="text/javascript" src="../../../../higtline/scripts/shCore.js"></script>
    <script type="text/javascript" src="../../../../higtline/scripts/shBrushCSharp.js"></script>
    <link type="text/css" rel="stylesheet" href="../../../../higtline/styles/shCoreDefault.css"/>
    <script type="text/javascript">SyntaxHighlighter.all();</script>
    <script src="../../../../js/Hyphenator.js" type="text/javascript"></script>
</head>

<body id="pageBody" class="hyphenate">

<!-- progress bar -->
<script src="../../../../js/progressBar.js" type="text/javascript"></script>
<div class="Reading-progress" id="progressBarType1"><span id="Progress-bar-top" class="bar-top" style="display: block !important;"></span></div>
<div class="Reading-progress" id="progressBarType2"><span id="Progress-bar-bottom" class="bar-bottom"></span></div>
<div class="Reading-progress" id="progressBarType3"><span id="Progress-bar-left" class="bar-left"></span></div>
<div class="Reading-progress" id="progressBarType4"><span id="Progress-bar-right" class="bar-right"></span></div>
<!-- progress bar -->


    <div id="lesonPage">

        <div id="lessMenu">
           <a id="exitLess" href="list.html" ontouchstart="return true;"><img src="../../../../img/menu/ex.png" /></a>
           <div id="aaLess" ontouchstart="return true;" onclick="OpenSettMenu();"><img src="../../../../img/menu/aa.png" /></div>
           <div id="subMenuInLess" style="display: none;">
                <a href="../../../../menu/setfontsize-ru.html" ontouchstart="return true;" id="pastMenuInLess">Размер текста</a>
                <a href="../../../../menu/setcolor-ru.html" ontouchstart="return true;" id="pastMenuInLess">Цветовая темы</a>
                <a href="../../../../menu/setProgressBar-ru.html" ontouchstart="return true;" id="pastMenuInLess" style="border: none;">Прогресс бар</a>
           </div>
           <div id="aaLess" ontouchstart="return true;">
            <div class="bmEdit" onclick="dellBm();" id="bma1226" ontouchstart="return true;" style="display: none;"><img src="../../../../img/menu/bmlessa.png" /></div>
            <div class="bmEdit" onclick="setzBm();" id="bm1226" ontouchstart="return true;" style="display: block;"><img src="../../../../img/menu/bmless.png" /></div>
           </div>
        </div>

        <hr />

	<!-- ПОЧАТОК -->
	
	<h1 id="title">
		Ресурсы
	</h1>

    <p>Ресурс в Yii это файл который может быть задан в Web странице.</p>
    <p>Это может быть CSS файл, JavaScript файл, изображение или видео файл и т.д.</p>
    <p>Ресурсы располагаются в Web доступных директориях и обслуживаются непосредственно Web серверами.</p>
    <p>Желательно, управлять ресурсами программно.</p>
    <p>Например, при использовании виджета [[yii\jui\DatePicker]] в странице, автоматически включаются необходимые CSS и JavaScript файлы, вместо того чтобы просить Вас в ручную найти эти файлы и включить их.</p>
    <p>И когда Вы обновляете виджет до новой версии, будут автоматически использованы новые версии файлов-ресурсов.</p>
    <p>В этом руководстве будет описана мощная возможность управления ресурсами представленная в Yii.</p>

    <h2 id="title">
        Комплекты ресурсов
    </h2>

    <p>Yii управляет ресурсами как единицей комплекта ресурсов.</p>
    <p>Комплект ресурсов - это простой набор ресурсов расположенных в директории.</p>
    <p>Когда Вы регистрируете комплект ресурсов в представлении, в отображаемой Web странице включается набор CSS и JavaScript файлов.</p>

    <h2 id="title">
        Задание Комплекта Ресурсов
    </h2>

    <p>Комплект ресурсов определяется как PHP класс расширяющийся от [[yii\web\AssetBundle]].</p>
    <p>Имя комплекта соответствует полному имени PHP класса (без ведущей обратной косой черты - backslash "").</p>
    <p>Класс комплекта ресурсов должен быть в состоянии возможности автозагрузки.</p>
    <p>При задании комплекта ресурсов обычно указывается где ресурсы находятся, какие CSS и JavaScript файлы содержит комплект, и как комплект зависит от других комплектов.</p>
    <p>Следующий код задаёт основной комплект ресурсов используемый в шаблоне базового приложения:</p>

    <pre class="brush: csharp;">
    &lt;?php
    
    namespace app\assets;
    
    use yii\web\AssetBundle;
    
    class AppAsset extends AssetBundle
    {
        public $basePath = '@webroot';
        public $baseUrl = '@web';
        public $css = [
            'css/site.css',
        ];
        public $js = [
        ];
        public $depends = [
            'yii\web\YiiAsset',
            'yii\bootstrap\BootstrapAsset',
        ];
    }
    </pre>

    <p>В коде выше класс AppAsset указывает, что файлы ресурса находятся в директории @webroot, которой соответствует URL @web; комплект содержит единственный CSS файл css/site.css и не содержит JavaScript файлов; комплект зависит от двух других комплектов: [[yii\web\YiiAsset]] и [[yii\bootstrap\BootstrapAsset]].</p>
    <p>Более детальное объяснение о свойствах [[yii\web\AssetBundle]] может быть найдено ниже:</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::sourcePath|sourcePath]]
    </pre>

    <p>задаёт корневую директорию содержащую файлы ресурса в этом комплекте.</p>
    <p>Это свойство должно быть установлено если корневая директория не доступна из Web.</p>
    <p>В противном случае, Вы должны установить [[yii\web\AssetBundle::basePath|basePath]] свойство и [[yii\web\AssetBundle::baseUrl|baseUrl]] свойство вместо текущего.</p>
    <p>Здесь могут быть использованы псевдонимы путей.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::basePath|basePath]]
    </pre>

    <p>задаёт Web доступную директорию, которая содержит файлы ресурсов текущего комплекта.</p>
    <p>Когда Вы задаёте свойство [[yii\web\AssetBundle::sourcePath|sourcePath]] Менеджер ресурсов опубликует ресурсы текущего комплекта в Web доступную директорию и перезапишет соответственно данное свойство.</p>
    <p>Вы должны задать данное свойство если Ваши файлы ресурсов уже в Web доступной директории и не нужно опубликовывать ресурсы.</p>
    <p>Здесь могут быть использованы псевдонимы путей.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::baseUrl|baseUrl]]
    </pre>

    <p>задаёт URL соответствующий директории [[yii\web\AssetBundle::basePath|basePath]].</p>
    <p>Также как и для [[yii\web\AssetBundle::basePath|basePath]], если Вы задаёте свойство [[yii\web\AssetBundle::sourcePath|sourcePath]] Менеджер ресурсов опубликует ресурсы и перезапишет это свойство соответственно.</p>
    <p>Здесь могут быть использованы псевдонимы путей.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::js|js]]
    </pre>

    <ul>
        <li>массив, перечисляющий JavaScript файлы, содержащиеся в данном комплекте. Заметьте, что только прямая косая черта (forward slash - "/") может быть использована, как разделитель директорий. Каждый JavaScript файл может быть задан в одном из следующих форматов:</li>
        <li>относительный путь, представленный локальным JavaScript файлом (например js/main.js). Актуальный путь файла может быть определён путём добавления [[yii\web\AssetManager::basePath]] к относительному пути, и актуальный URL файла может быть определён путём добавления [[yii\web\AssetManager::baseUrl]] к относительному пути.</li>
        <li>абсолютный URL, представленный внешним JavaScript файлом. Например, http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js или //ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js.</li>
    </ul>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::css|css]]
    </pre>

    <p>массив, перечисляющий CSS файлы, содержащиеся в данном комплекте.</p>
    <p>Формат этого массива такой же, как и у [[yii\web\AssetBundle::js|js]].</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::depends|depends]]
    </pre>

    <p>массив, перечисляющий имена комплектов ресурсов, от которых зависит данный комплект.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::jsOptions|jsOptions]]
    </pre>

    <p>задаёт параметры, которые будут относится к методу [[yii\web\View::registerJsFile()]], когда он вызывается для регистрации каждого JavaScript файла данного комплекта.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::cssOptions|cssOptions]]
    </pre>

    <p>задаёт параметры, которые будут приняты методом [[yii\web\View::registerCssFile()]], когда он вызывается для регистрации каждого CSS файла данного комплекта.</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::publishOptions|publishOptions]]
    </pre>

    <p>задаёт параметры, которые будут приняты методом [[yii\web\AssetManager::publish()]], когда метод будет вызван, опубликуются исходные файлы ресурсов в Web директории.</p>
    <p>Этот параметр используется только в том случае, если задаётся свойство [[yii\web\AssetBundle::sourcePath|sourcePath]].</p>

    <h3 id="title">
        Расположение ресурсов
    </h3>

    <p>Ресурсы, в зависимости от их расположения, могут быть классифицированы как:</p>

    <ul>
        <li>исходные ресурсы: файлы ресурсов, расположенные вместе с исходным кодом PHP, которые не могут быть непосредственно доступны через Web. Для того, чтобы использовать исходные ресурсы на странице, они должны быть скопированы в Web директорию и превратиться в так называемые опубликованные ресурсы. Этот процесс называется публикацией ресурсов, который более подробно описан ниже</li>
        <li>опубликованные ресурсы: файлы ресурсов, расположенные в Web директории и, таким образом, могут быть напрямую доступны через Web.</li>
        <li>внешние ресурсы: файлы ресурсов, расположенные на другом Web сервере, отличного от веб-хостинга вашего приложения.</li>
    </ul>

    <p>При определении класса комплекта ресурсов, если Вы задаёте свойство</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::sourcePath|sourcePath]]
    </pre>

    <p>это означает, что любые перечисленные ресурсы, используя относительные пути, будут рассматриваться как исходные ресурсы.</p>
    <p>Если Вы не задаёте данное свойство, это означает, что эти ресурсы - это опубликованные ресурсы (в этом случае Вам следует указать</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::basePath|basePath]]
    </pre>

    <p>и</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::baseUrl|baseUrl]]
    </pre>

    <p>чтобы дать знать Yii где ресурсы располагаются).</p>
    <p>Рекомендуется размещать ресурсы, принадлежащие приложению, в Web директорию, для того, чтобы избежать не нужного процесса публикации ресурсов.</p>
    <p>Вот почему AppAsset в предыдущем примере задаёт</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::basePath|basePath]]
    </pre>

    <p>вместо</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::sourcePath|sourcePath]]
    </pre>

    <p>Для расширений, в связи с тем, что их ресурсы располагаются вместе с их исходным кодом в директориях, которые не являются веб-доступными, необходимо указать свойство</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::sourcePath|sourcePath]]
    </pre>

    <p>при задании класса комплекта ресурсов для них.</p>
    <p><b>Примечание:</b> Не используйте @webroot/assets как</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::sourcePath|source path]]
    </pre>

    <p>Эта директория по умолчанию используется менеджером ресурсов</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetManager|asset manager]]
    </pre>

    <p>для сохранения файлов ресурсов, опубликованных из их исходного месторасположения.</p>
    <p>Любое содержимое этой директории расценивается как временное и может быть удалено.</p>

    <h3 id="title">
        Зависимости ресурсов
    </h3>

    <p>Когда Вы включаете несколько CSS или JavaScript файлов в Web страницу, они должны следовать в определенном порядке, чтобы избежать переопределения при выдаче.</p>
    <p>Например, если Вы используете виджет jQuery UI в Web странице, вы должны убедиться, что jQuery JavaScript файл был включен до jQuery UI JavaScript файла.</p>
    <p>Мы называем такой порядок зависимостью между ресурсами.</p>
    <p>Зависимости ресурсов в основном указываются через свойство [[yii\web\AssetBundle::depends]].</p>
    <p>Например в AppAsset, комплект ресурсов зависит от двух других комплектов ресурсов: [[yii\web\YiiAsset]] и [[yii\bootstrap\BootstrapAsset]], что обозначает, что CSS и JavaScript файлы AppAsset будут включены после файлов этих двух комплектов зависимостей.</p>
    <p>Зависимости ресурсов являются также зависимыми.</p>
    <p>Это значит, что если комплект А зависит от В, который зависит от С, то А тоже зависит от С.</p>

    <h3 id="title">
        Параметры ресурсов
    </h3>

    <p>Вы можете задать свойства</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::cssOptions|cssOptions]]
    </pre>

    <p>и</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::jsOptions|jsOptions]]
    </pre>

    <p>чтобы настроить путь для включения CSS и JavaScript файлов в страницу.</p>
    <p>Значения этих свойств будут приняты методами</p>

    <pre class="brush: csharp;">
        [[yii\web\View::registerCssFile()]]
    </pre>

    <p>и</p>

    <pre class="brush: csharp;">
    [[yii\web\View::registerJsFile()]]
    </pre>

    <p>соответственно, когда они (методы) вызываются представлением происходит включение CSS и JavaScript файлов.</p>
    <p><b>Примечание:</b> Параметры, заданные в комплекте класса применяются для каждого CSS/JavaScript-файла в комплекте. Если Вы хотите использовать различные параметры для разных файлов, Вы должны создать раздельные комплекты ресурсов, и использовать одну установку параметров для каждого комплекта.</p>
    <p>Например, условно включим CSS файл для браузера IE9 или ниже.</p>
    <p>Для этого Вы можете использовать следующий параметр:</p>

    <pre class="brush: csharp;">
    public $cssOptions = ['condition' =&gt; 'lte IE9'];
    </pre>

    <p>Это вызовет CSS файл из комплекта, который будет включен в страницу, используя следующие HTML теги:</p>

    <pre class="brush: csharp;">
    &lt;!--[if lte IE9]&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;path/to/foo.css&quot;&gt;
    &lt;![endif]--&gt;
    </pre>

    <p>Для того чтобы обернуть созданную CSS ссылку в тег &lt;noscript&gt;, Вы можете настроить cssOptions следующим образом:</p>

    <pre class="brush: csharp;">
    public $cssOptions = ['noscript' =&gt; true];
    </pre>

    <p>Для включения JavaScript файла в head раздел страницы (по умолчанию, JavaScript файлы включаются в конец раздела body) используйте следующий параметр:</p>

    <pre class="brush: csharp;">
    public $jsOptions = ['position' =&gt; \yii\web\View::POS_HEAD];
    </pre>

    <p>По умолчанию, когда комплект ресурсов публикуется, всё содержимое в заданной директории</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::sourcePath]]
    </pre>

    <p>будет опубликовано.</p>
    <p>Вы можете настроить это поведение, сконфигурировав свойство</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::publishOptions|publishOptions]]
    </pre>

    <p>Например, опубликовать одну или несколько поддиректорий [[yii\web\AssetBundle::sourcePath]] в классе комплекта ресурсов Вы можете в следующим образом:</p>

    <pre class="brush: csharp;">
    &lt;?php
    namespace app\assets;
    
    use yii\web\AssetBundle;
    
    class FontAwesomeAsset extends AssetBundle 
    {
        public $sourcePath = '@bower/font-awesome'; 
        public $css = [ 
            'css/font-awesome.min.css', 
        ]; 
        
        public function init()
        {
            parent::init();
            $this->publishOptions['beforeCopy'] = function ($from, $to) {
                $dirname = basename(dirname($from));
                return $dirname === 'fonts' || $dirname === 'css';
            };
        }
    }
    </pre>

    <p>В выше указанном примере определён комплект ресурсов для пакета "fontawesome".</p>
    <p>Задан параметр публикации beforeCopy, здесь только fonts и css поддиректории будут опубликованы.</p>

    <h3 id="title">
        Установка ресурсов Bower и NPM
    </h3>

    <p>Большинство JavaScript/CSS пакетов управляются Bower и/или NPM.</p>
    <p>В мире PHP мы испольуем Composer для управления зависимостями, но он не позволяет устанавливать пакеты Bower и NPM, просто указывая их в composer.json.</p>
    <p>Чтобы получить такую возможность, нужно немного настроить Composer.</p>
    <p>Существует два варианта:</p>

    <h4 id="title">
        Используя репозиторий asset-packagist
    </h4>

    <p>Этот способ удовлетворяет потребности большинства проектов, которым нужны Bower или NPM пакеты.</p>
    <p><b>Примечание:</b> Начиная с версии 2.0.13, Basic и Advanced шаблоны приложений уже сконфигурированы для использования asset-packagist, так что этот раздел можно пропустить.</p>
    <p>В файле composer.json вашего проекта, добавьте следующие строки:</p>

    <pre class="brush: csharp;">
    "repositories": [
        {
            "type": "composer",
            "url": "https://asset-packagist.org"
        }
    ]
    </pre>

    <p>Настройте алиасы @npm и @bower в файле конфигурации вашего приложения:</p>

    <pre class="brush: csharp;">
    $config = [
        ...
        'aliases' =&gt; [
            '@bower' =&gt; '@vendor/bower-asset',
            '@npm'   =&gt; '@vendor/npm-asset',
        ],
        ...
    ];
    </pre>

    <p>Посетите asset-packagist.org чтобы узнать, как это работает.</p>

    <h4 id="title">
        Используя fxp/composer-asset-plugin
    </h4>

    <p>По сравнению с asset-packagist, composer-asset-plugin не требует изменять конфигурацию приложения.</p>
    <p>Вместо этого, требуется установить специальный глобальный пакет Composer, выполнив следующую команду:</p>

    <pre class="brush: csharp;">
    composer global require "fxp/composer-asset-plugin:^1.3.1"
    </pre>

    <p>Эта команда устанавливает composer asset plugin глобально, что позволит устанавливать зависимости из Bower и NPM.</p>
    <p>После установки все проекты на вашем комьютере будут поддерживать установку Bower и NPM пакетов, описанных в composer.json.</p>
    <p>Добавьте следующие строки в composer.json вашего проекта, чтобы указать директории, в которые будут установлены необходимые Bower и NPM пакеты:</p>

    <pre class="brush: csharp;">
    "extra": {
        "asset-installer-paths": {
            "npm-asset-library": "vendor/npm",
            "bower-asset-library": "vendor/bower"
        }
    }
    </pre>

    <p><b>Примечание:</b> fxp/composer-asset-plugin выполняет команду composer update существенно дольше, по сравнению с asset-packagist.</p>

    <p>После настройки Composer для поддержки Bower и NPM пакетов:</p>

    <ol>
        <li>Исправьте файл composer.json Вашего приложения или расширения и включите пакет в список в раздел require. Следует использовать bower-asset/PackageName (для Bower пакетов) или npm-asset/PackageName (для NPM пакетов) для обращения к соответствующей библиотеке.</li>
        <li>Выполните composer update</li>
        <li>Создайте класс комплекта ресурсов и перечислите JavaScript/CSS файлы, которые Вы планируете использовать в Вашем приложении или расширении. Вы должны задать свойство [[yii\web\AssetBundle::sourcePath|sourcePath]] как @bower/PackageName или @npm/PackageName.</li>
    </ol>

    <p>Это происходит потому, что Composer устанавливает Bower или NPM пакет в директорию, соответствующую этим псевдонимам.</p>
    <p><b>Примечание:</b> В некоторых пакетах файлы дистрибутива могут находиться в поддиректории. В этом случае, Вы должны задать поддиректорию как значение [[yii\web\AssetBundle::sourcePath|sourcePath]]. Например, [[yii\web\JqueryAsset]] использует @bower/jquery/dist вместо @bower/jquery.</p>
    
    <h2 id="title">
        Использование Комплекта Ресурсов
    </h2>

    <p>Для использования комплекта ресурсов, зарегистрируйте его в представлении вызвав метод [[yii\web\AssetBundle::register()]].</p>
    <p>Например, комплект ресурсов в представлении может быть зарегистрирован следующим образом:</p>

    <pre class="brush: csharp;">
    use app\assets\AppAsset;
    AppAsset::register($this);  // $this - представляет собой объект представления
    </pre>

    <p><b>Информация:</b> Метод [[yii\web\AssetBundle::register()]] возвращает объект комплекта ресурсов, содержащий информацию о публикуемых ресурсах, таких как</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::basePath|basePath]]
    </pre>

    <p>или</p>

    <pre class="brush: csharp;">
    [[yii\web\AssetBundle::baseUrl|baseUrl]].
    </pre>

    <p>Если Вы регистрируете комплект ресурсов в других местах (т.е. не в представлении), Вы должны обеспечить необходимый объект представления.</p>
    <p>Например, при регистрации комплекта ресурсов в классе widget, Вы можете взять за объект представления $this->view.</p>
    <p>Когда комплект ресурсов регистрируется в представлении, Yii регистрирует все зависимые от него комплекты ресурсов.</p>
    <p>И, если комплект ресурсов расположен в директории не доступной из Web, то он будет опубликован в Web директории.</p>
    <p>Затем, когда представление отображает страницу, сгенерируются теги &lt;link&gt; и &lt;script&gt; для CSS и JavaScript файлов, перечисленных в регистрируемых комплектах.</p>
    <p>Порядок этих тегов определён зависимостью среди регистрируемых комплектов, и последовательность ресурсов перечислена в [[yii\web\AssetBundle::css]] и [[yii\web\AssetBundle::js]] свойствах.</p>

    <h3 id="title">
        Динамические Комплекты Ресурсов
    </h3>

    <p>Поскольку комплект ресурсов это обычный PHP класс, он может содержать дополнительную логику, связанную с ним, и может корректировать свои внутренние параметры динамически.</p>
    <p>Например, вы можете использовать сложную JavaScript библиотеку, которая предоставляет интернационализацию через отдельные исходные файлы: по одному на каждый поддерживаемый язык.</p>
    <p>Таким образом, вам нужно добавить определенный '.js' файл на вашу страницу, чтобы применить перевод для библиотеки.</p>
    <p>Этого можно достичь, переопределив метод [[yii\web\AssetBundle::init()]]:</p>

    <pre class="brush: csharp;">
    namespace app\assets;
    
    use yii\web\AssetBundle;
    use Yii;
    
    class SophisticatedAssetBundle extends AssetBundle
    {
        public $sourcePath = '/path/to/sophisticated/src';
        public $js = [
            'sophisticated.js' // file, which is always used
        ];
    
        public function init()
        {
            parent::init();
            $this->js[] = 'i18n/' . Yii::$app->language . '.js'; // dynamic file added
        }
    }
    </pre>

    <p>Конкретный комплект ресурсов может быть также изменен через его экземпляр, возвращенный методом [[yii\web\AssetBundle::register()]].</p>
    <p>Например:</p>

    <pre class="brush: csharp;">
    use app\assets\SophisticatedAssetBundle;
    use Yii;
    
    $bundle = SophisticatedAssetBundle::register(Yii::$app->view);
    $bundle->js[] = 'i18n/' . Yii::$app->language . '.js'; // dynamic file added
    </pre>

    <p><b>Замечание:</b> несмотря на то что динамическая корректрировка комплекта ресурсов поддерживается, ее использование - это плохая практика, которая может привести к неожиданным побочных эффектам, и которой следует избегать.</p>

    <h3 id="title">
        Настройка Комплектов Ресурсов
    </h3>

    <p>Yii управляет комплектами ресурсов через компонент приложения называемый assetManager, который реализован в [[yii\web\AssetManager]].</p>
    <p>Путём настройки свойства [[yii\web\AssetManager::bundles]], возможно настроить поведение комплекта ресурсов.</p>
    <p>Например, комплект ресурсов [[yii\web\JqueryAsset]] по умолчанию использует jquery.js файл из установленного jquery Bower пакета.</p>
    <p>Для повышения доступности и производительности, можно использовать версию jquery на Google хостинге.</p>
    <p>Это может быть достигнуто, настроив assetManager в конфигурации приложения следующим образом:</p>

    <pre class="brush: csharp;">
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'bundles' =&gt; [
                    'yii\web\JqueryAsset' =&gt; [
                        'sourcePath' =&gt; null,   // не опубликовывать комплект
                        'js' =&gt; [
                            '//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js',
                        ]
                    ],
                ],
            ],
        ],
    ];
    </pre>

    <p>Можно сконфигурировать несколько комплектов ресурсов аналогично через [[yii\web\AssetManager::bundles]].</p>
    <p>Ключи массива должны быть именами класса (без впереди стоящей обратной косой черты) комплектов ресурсов, а значения массивов должны соответствовать конфигурации массивов.</p>
    <p><b>Совет:</b> Можно условно выбрать, какой из ресурсов будет использован в комплекте ресурсов.</p>
    <p>Следующий пример показывает, как можно использовать в разработке окружения jquery.js или jquery.min.js в противном случае:</p>

    <pre class="brush: csharp;">
    'yii\web\JqueryAsset' =&gt; [
        'js' =&gt; [
            YII_ENV_DEV ? 'jquery.js' : 'jquery.min.js'
        ]
    ],
    </pre>


    <p>Можно запретить один или несколько комплектов ресурсов, связав false с именами комплектов ресурсов, которые Вы хотите сделать недоступными.</p>
    <p>Когда Вы регистрируете недоступный комплект ресурсов в представлении, обратите внимание, что зависимость комплектов будет зарегистрирована, и представление также не включит ни один из ресурсов комплекта в отображаемую страницу.</p>
    <p>Например, для запрета [[yii\web\JqueryAsset]] можно использовать следующую конфигурацию:</p>

    <pre class="brush: csharp;">
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'bundles' =&gt; [
                    'yii\web\JqueryAsset' =&gt; false,
                ],
            ],
        ],
    ];
    </pre>

    <p>Можно также запретить все комплекты ресурсов, установив [[yii\web\AssetManager::bundles]] как false.</p>
    <p>Имейте в виду, что настройки, установленный через [[yii\web\AssetManager::bundles]], применяются в момент создания комплекта ресурсов, т.е. в момент срабатывания конструктора.</p>
    <p>Таким образом, любые изменения, которые произведены над экземпляром комплекта ресурсов после этого, перекроют настройки, установленные на уровне [[yii\web\AssetManager::bundles]].</p>
    <p>В частности, изменения, произведенные внутри метода [[yii\web\AssetBundle::init()]] или после регистрации комплекта ресурсов, имеют приоритет над настройками AssetManager.</p>
    <p>Ниже приведены примеры, в которых значения, установленные через [[yii\web\AssetManager::bundles]] не возымеют никакого эффекта:</p>

    <pre class="brush: csharp;">
    // Program source code:
    
    namespace app\assets;
    
    use yii\web\AssetBundle;
    use Yii;
    
    class LanguageAssetBundle extends AssetBundle
    {
        // ...
    
        public function init()
        {
            parent::init();
            $this->baseUrl = '@web/i18n/' . Yii::$app->language; // can NOT be handled by `AssetManager`!
        }
    }
    // ...
    
    $bundle = \app\assets\LargeFileAssetBundle::register(Yii::$app->view);
    $bundle->baseUrl = YII_DEBUG ? '@web/large-files': '@web/large-files/minified'; // can NOT be handled by `AssetManager`!
    
    
    // Application config :
    
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'bundles' =&gt; [
                    'app\assets\LanguageAssetBundle' =&gt; [
                        'baseUrl' =&gt; 'http://some.cdn.com/files/i18n/en' // makes NO effect!
                    ],
                    'app\assets\LargeFileAssetBundle' =&gt; [
                        'baseUrl' =&gt; 'http://some.cdn.com/files/large-files' // makes NO effect!
                    ],
                ],
            ],
        ],
    ];
    </pre>

    <h3 id="title">
        Привязка ресурсов
    </h3>

    <p>Иногда необходимо исправить пути до файлов ресурсов, в нескольких комплектах ресурсов.</p>
    <p>Например, комплект А использует jquery.min.js версии 1.11.1, а комплект В использует jquery.js версии 2.1.1. Раньше Вы могли решить данную проблему, настраивая каждый комплект ресурсов по отдельности, но более простой способ - использовать asset map возможность, чтобы найти неверные ресурсы и исправить их.</p>
    <p>Сделать это можно, сконфигурировав свойство [[yii\web\AssetManager::assetMap]] следующим образом:</p>

    <pre class="brush: csharp;">
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'assetMap' =&gt; [
                    'jquery.js' =&gt; '//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js',
                ],
            ],
        ],
    ];
    </pre>

    <p>Ключи [[yii\web\AssetManager::assetMap|assetMap]] - это имена ресурсов, которые Вы хотите исправить, а значения - это требуемые пути для ресурсов.</p>
    <p>Когда регистрируется комплект ресурсов в представлении, каждый соответствующий файл ресурса в [[yii\web\AssetBundle::css|css]] или [[yii\web\AssetBundle::js|js]] массивах будет рассмотрен в соответствии с этой привязкой.</p>
    <p>И, если какой-либо из ключей найден, как последняя часть пути до файла ресурса (путь на который начинается с [[yii\web\AssetBundle::sourcePath]] по возможности), то соответствующее значение заменит ресурс и будет зарегистрировано в представлении.</p>
    <p>Например, путь до файла ресурса my/path/to/jquery.js - это соответствует ключу jquery.js.</p>
    <p><b>Примечание:</b> Ресурсы заданные только с использованием относительного пути могут использоваться в привязке ресурсов.</p>
    <p>Пути ресурсов должны быть абсолютные URLs или путь относительно [[yii\web\AssetManager::basePath]].</p>

    <h3 id="title">
        Публикация Ресурсов
    </h3>

    <p>Как уже было сказано выше, если комплект ресурсов располагается в директории которая не доступна из Web, эти ресурсы будут скопированы в Web директорию, когда комплект будет зарегистрирован в представлении.</p>
    <p>Этот процесс называется публикацией ресурсов, его автоматически выполняет [[yii\web\AssetManager|asset manager]].</p>
    <p>По умолчанию, ресурсы публикуются в директорию @webroot/assets которая соответствует URL @web/assets.</p>
    <p>Можно настроить это местоположение сконфигурировав свойства [[yii\web\AssetManager::basePath|basePath]] и [[yii\web\AssetManager::baseUrl|baseUrl]].</p>
    <p>Вместо публикации ресурсов путём копирования файлов, можно рассмотреть использование символических ссылок, если Ваша операционная система или Web сервер это разрешают.</p>
    <p>Эта функция может быть включена путем установки [[yii\web\AssetManager::linkAssets|linkAssets]] в true.</p>

    <pre class="brush: csharp;">
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'linkAssets' =&gt; true,
            ],
        ],
    ];
    </pre>

    <p>С конфигурацией, установленной выше, менеджер ресурсов будет создавать символические ссылки на исходные пути комплекта ресурсов когда он будет публиковаться.</p>
    <p>Это быстрее, чем копирование файлов, а также может гарантировать, что опубликованные ресурсы всегда up-to-date(обновлённые/свежие).</p>

    <h3 id="title">
        Перебор Кэша
    </h3>

    <p>Для Web приложения запущенного в режиме продакшена, считается нормальной практикой разрешить HTTP кэширование для ресурсов и других статичных источников.</p>
    <p>Недостаток такой практики в том, что всякий раз, когда изменяется ресурс и разворачивается продакшен, пользователь может по-прежнему использовать старую версию ресурса вследствие HTTP кэширования.</p>
    <p>Чтобы избежать этого, можно использовать возможность перебора кэша, которая была добавлена в версии 2.0.3, для этого можно настроить [[yii\web\AssetManager]] следующим образом:</p>

    <pre class="brush: csharp;">
    return [
        // ...
        'components' =&gt; [
            'assetManager' =&gt; [
                'appendTimestamp' =&gt; true,
            ],
        ],
    ];
    </pre>

    <p>Делая таким образом, к URL каждого опубликованного ресурса будет добавляться временная метка его последней модификации.</p>
    <p>Например, URL для yii.js может выглядеть как /assets/5515a87c/yii.js?v=1423448645", где параметр v представляет собой временную метку последней модификации файла yii.js.</p>
    <p>Теперь если изменить ресурс, его URL тоже будет изменен, это означает что клиент получит последнюю версию ресурса.</p>

    <h2 id="title">
        Обычное Использование Комплекта Ресурсов
    </h2>

    <p>Код ядра Yii содержит большое количество комплектов ресурсов.</p>
    <p>Среди них, следующие комплекты широко используются и могут упоминаться в Вашем приложении или коде расширения:</p>
    
    <pre class="brush: csharp;">
    [[yii\web\YiiAsset]]
    </pre>
    
    <p>Включает основной yii.js файл который реализует механизм организации JavaScript кода в модулях.</p>
    <p>Также обеспечивает специальную поддержку для data-method и data-confirm атрибутов и содержит другие полезные функции.</p>
    
    <pre class="brush: csharp;">
    [[yii\web\JqueryAsset]]
    </pre>
    
    <p>Включает jquery.js файл из jQuery Bower пакета.</p>
    
    <pre class="brush: csharp;">
    [[yii\bootstrap\BootstrapAsset]]
    </pre>
    
    <p>Включает CSS файл из Twitter Bootstrap фреймворка.</p>
    
    <pre class="brush: csharp;">
    [[yii\bootstrap\BootstrapPluginAsset]]
    </pre>
    
    <p>Включает JavaScript файл из Twitter Bootstrap фреймворка для поддержки Bootstrap JavaScript плагинов.</p>
    
    <pre class="brush: csharp;">
    [[yii\jui\JuiAsset]]
    </pre>
    
    <p>Включает CSS и JavaScript файлы из jQuery UI библиотеки.</p>
    <p>Если Ваш код зависит от jQuery, jQuery UI или Bootstrap, Вам необходимо использовать эти предопределенные комплекты ресурсов, а не создавать свои собственные варианты.</p>
    <p>Если параметры по умолчанию этих комплектов не удовлетворяют Вашим нуждам, Вы можете настроить их как описано в подразделе Настройка Комплектов Ресурсов.</p>

    <h2 id="title">
        Преобразование Ресурсов
    </h2>

    <p>Вместо того, чтобы напрямую писать CSS и/или JavaScript код, разработчики часто пишут его в некотором расширенном синтаксисе и используют специальные инструменты конвертации в CSS/JavaScript.</p>
    <p>Например, для CSS кода можно использовать LESS или SCSS; а для JavaScript можно использовать TypeScript.</p>
    <p>Можно перечислить файлы ресурсов в расширенном синтаксисе в</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::css|css]]
    </pre>

    <p>и</p>

    <pre class="brush: csharp;">
        [[yii\web\AssetBundle::js|js]]
    </pre>

    <p>свойствах из комплекта ресурсов.</p>
    <p>Например,</p>

    <pre class="brush: csharp;">
    class AppAsset extends AssetBundle
    {
        public $basePath = '@webroot';
        public $baseUrl = '@web';
        public $css = [
            'css/site.less',
        ];
        public $js = [
            'js/site.ts',
        ];
        public $depends = [
            'yii\web\YiiAsset',
            'yii\bootstrap\BootstrapAsset',
        ];
    }
    </pre>

    <p>Когда Вы регистрируете такой комплект ресурсов в представлении, [[yii\web\AssetManager|asset manager]] автоматически запустит нужные инструменты препроцессора и конвертирует ресурсы в CSS/JavaScript, если их расширенный синтаксис распознан.</p>
    <p>Когда представление окончательно отобразит страницу, в неё будут включены файлы CSS/JavaScript, вместо оригинальных ресурсов в расширенном синтаксисе.</p>
    <p>Yii использует имена расширений файлов для идентификации расширенного синтаксиса внутри ресурса.</p>
    <p>По умолчанию признаны следующие синтаксисы и имена расширений файлов:</p>

    <ul>
        <li>LESS: .less</li>
        <li>SCSS: .scss</li>
        <li>Stylus: .styl</li>
        <li>CoffeeScript: .coffee</li>
        <li>TypeScript: .ts</li>
    </ul>

    <p>Yii ориентируется на установленные инструменты конвертации ресурсов препроцессора.</p>
    <p>Например, используя LESS, Вы должны установить команду lessc препроцессора.</p>
    <p>Вы можете настроить команды препроцессора и поддерживать расширенный синтаксис сконфигурировав [[yii\web\AssetManager::converter]] следующим образом:</p>

    <pre class="brush: csharp;">
    return [
        'components' =&gt; [
            'assetManager' =&gt; [
                'converter' =&gt; [
                    'class' =&gt; 'yii\web\AssetConverter',
                    'commands' =&gt; [
                        'less' =&gt; ['css', 'lessc {from} {to} --no-color'],
                        'ts' =&gt; ['js', 'tsc --out {to} {from}'],
                    ],
                ],
            ],
        ],
    ];
    </pre>

    <p>В примере выше, Вы задали поддержку расширенного синтаксиса через [[yii\web\AssetConverter::commands]] свойство.</p>
    <p>Ключи массива - это имена расширений файлов (без ведущей точки), а значения массива - это образующийся файл ресурса имён расширений и команд для выполнения конвертации ресурса.</p>
    <p>Маркеры {from} и {to} в командах будут заменены соответственно исходным путём файла ресурсов и путём назначения файла ресурсов.</p>
    <p><b>Примечание:</b> Существуют другие способы работы с ресурсами расширенного синтаксиса, кроме того, который указан выше.</p>
    <p>Например, Вы можете использовать инструменты построения, такие как grunt для отслеживания и автоматической конвертации ресурсов расширенного синтаксиса.</p>
    <p>В этом случае, Вы должны перечислить конечные CSS/JavaScript файлы в комплекте ресурсов вместо исходных файлов.</p>

    <h2 id="title">
        Объединение и Сжатие Ресурсов
    </h2>

    <p>Web страница может включать много CSS и/или JavaScript файлов.</p>
    <p>Чтобы сократить количество HTTP запросов и общий размер загрузки этих файлов, общепринятой практикой является объединение и сжатие нескольких CSS/JavaScript файлов в один или в более меньшее количество, а затем включение этих сжатых файлов вместо исходных в Web страницы.</p>
    <p><b>Примечание:</b> Комбинирование и сжатие ресурсов обычно необходимо, когда приложение находится в режиме продакшена.</p>
    <p>В режиме разработки, использование исходных CSS/JavaScript файлов часто более удобно для отладочных целей.</p>
    <p>Далее, мы представим подход комбинирования и сжатия файлов ресурсов без необходимости изменения Вашего существующего кода приложения.</p>

    <ol>
        <li>Найдите все комплекты ресурсов в Вашем приложении, которые Вы планируете скомбинировать и сжать.</li>
        <li>Распределите эти комплекты в одну или несколько групп. Обратите внимание, что каждый комплект может принадлежать только одной группе.</li>
        <li>Скомбинируйте/сожмите CSS файлы каждой группы в один файл. Сделайте то же самое для JavaScript файлов.</li>
        <li>Определите новый комплект ресурсов для каждой группы:</li>
    </ol>
    <ul>
        <li>Или установите [[yii\web\AssetBundle::css|css]] и [[yii\web\AssetBundle::js|js]] свойства. Соответствующие CSS и JavaScript файлы будут объединены.</li>
        <li>Или настройте комплекты ресурсов каждой группы, установив их [[yii\web\AssetBundle::css|css]] и [[yii\web\AssetBundle::js|js]] свойства как пустые, и установите их [[yii\web\AssetBundle::depends|depends]] свойство как новый комплект ресурсов, созданный для группы.</li>
    </ul>

    <p>Используя этот подход, при регистрации комплекта ресурсов в представлении, автоматически регистрируется новый комплект ресурсов для группы, к которому исходный комплект принадлежит.</p>
    <p>В результате скомбинированные/сжатые файлы ресурсов включаются в страницу вместо исходных.</p>

    <h3 id="title">
        Пример
    </h3>

    <p>Давайте рассмотрим пример, чтобы объяснить вышеуказанный подход.</p>
    <p>Предположим, ваше приложение имеет две страницы, X и Y.</p>
    <p>Страница X использует комплект ресурсов A, B и C, в то время, как страница Y использует комплект ресурсов, B, C и D.</p>
    <p>У Вас есть два пути, чтобы разделить эти комплекты ресурсов.</p>
    <p>Первый - использовать одну группу, включающую в себя все комплекты ресурсов.</p>
    <p>Другой путь - положить комплект А в группу Х, D в группу Y, а (B, C) в группу S.</p>
    <p>Какой из этих вариантов лучше? Первый способ имеет преимущество в том, что в обоих страницах одинаково скомбинированы файлы CSS и JavaScript, что делает HTTP кэширование более эффективным.</p>
    <p>С другой стороны, поскольку одна группа содержит все комплекты, размер скомбинированных CSS и JavaScript файлов будет больше, и таким образом увеличится время отдачи файла (загрузки страницы).</p>
    <p>Для простоты в этом примере, мы будем использовать первый способ, то есть использовать единую группу, содержащую все пакеты.</p>
    <p><b>Примечание:</b> Разделение комплекта ресурсов на группы это не тривиальная задача.</p>
    <p>Это, как правило, требует анализа реальных данных о трафике различных ресурсов на разных страницах.</p>
    <p>В начале вы можете начать с одной группы, для простоты.</p>
    <p>Используйте существующие инструменты (например Closure Compiler, YUI Compressor) для объединения и сжатия CSS и JavaScript файлов во всех комплектах.</p>
    <p>Обратите внимание, что файлы должны быть объединены в том порядке, который удовлетворяет зависимости между комплектами.</p>
    <p>Например, если комплект A зависит от В, который зависит от С и D, то Вы должны перечислить файлы ресурсов начиная с С и D, затем B, и только после этого А.</p>
    <p>После объединения и сжатия, Вы получите один CSS файл и один JavaScript файл. Предположим, они названы как all-xyz.css и all-xyz.js, где xyz это временная метка или хэш, который используется, чтобы создать уникальное имя файла, чтобы избежать проблем с HTTP кэшированием.</p>
    <p>Сейчас мы находимся на последнем шаге.</p>
    <p>Настройте [[yii\web\AssetManager|asset manager]] в конфигурации вашего приложения, как показано ниже:</p>

    <pre class="brush: csharp;">
    return [
        'components' =&gt; [
            'assetManager' =&gt; [
                'bundles' =&gt; [
                    'all' =&gt; [
                        'class' =&gt; 'yii\web\AssetBundle',
                        'basePath' =&gt; '@webroot/assets',
                        'baseUrl' =&gt; '@web/assets',
                        'css' =&gt; ['all-xyz.css'],
                        'js' =&gt; ['all-xyz.js'],
                    ],
                    'A' =&gt; ['css' =&gt; [], 'js' =&gt; [], 'depends' =&gt; ['all']],
                    'B' =&gt; ['css' =&gt; [], 'js' =&gt; [], 'depends' =&gt; ['all']],
                    'C' =&gt; ['css' =&gt; [], 'js' =&gt; [], 'depends' =&gt; ['all']],
                    'D' =&gt; ['css' =&gt; [], 'js' =&gt; [], 'depends' =&gt; ['all']],
                ],
            ],
        ],
    ];
    </pre>

    <p>Как объяснено в подразделе Настройка Комплектов Ресурсов, приведенная выше конфигурация изменяет поведение по умолчанию каждого комплекта.</p>
    <p>В частности, комплекты A, B, C и D не имеют больше никаких файлов ресурсов.</p>
    <p>Теперь они все зависят от all комплекта, который содержит скомбинированные all-xyz.css и all-xyz.js файлы.</p>
    <p>Следовательно, для страницы X, вместо включения исходных файлов ресурсов из комплектов A, B и C, только два этих объединённых файла будут включены, то же самое произойдёт и со страницей Y.</p>
    <p>Есть еще один трюк, чтобы сделать работу вышеуказанного подхода более отлаженной.</p>
    <p>Вместо изменения конфигурационного файла приложения напрямую, можно поставить комплект массива настроек в отдельный файл, и условно включить этот файл в конфигурацию приложения.</p>
    <p>Например,</p>

    <pre class="brush: csharp;">
    return [
        'components' =&gt; [
            'assetManager' =&gt; [
                'bundles' =&gt; require __DIR__ . '/' . (YII_ENV_PROD ? 'assets-prod.php' : 'assets-dev.php'),  
            ],
        ],
    ];
    </pre>

    <p>То есть, массив конфигурации комплекта ресурсов сохраняется в assets-prod.php для режима продакшена, и в assets-dev.php для режима не продакшена (разработки).</p>
    <p><b>Замечание:</b> этот механизм объединения комплектов ресурсов основан на способности [[yii\web\AssetManager::bundles]] перекрывать поля регистрируемых комплектов ресурсов.</p>
    <p>Однако, как уже было сказано выше, эта возможность не распространяется на изменения, внесенные в комплекты ресурсов на уровне метода [[yii\web\AssetBundle::init()]] ил после регистрации.</p>
    <p>Вам следует избегать использования динамических комплектов ресурсов в процессе объединения.</p>

    <h3 id="title">
        Использование команды asset
    </h3>

    <p>Yii предоставляет консольную команду с именем asset для автоматизации подхода, который мы только что описали.</p>
    <p>Чтобы использовать эту команду, Вы должны сначала создать файл конфигурации для описания того, как комплекты ресурсов должны быть скомбинированы, и как они должны быть сгруппированы.</p>
    <p>Затем Вы можете использовать подкомманду asset/template, чтобы сгенерировать первый шаблон и затем отредактировать его под свои нужды.</p>

    <pre class="brush: csharp;">
    yii asset/template assets.php
    </pre>

    <p>Данная команда сгенерирует файл с именем assets.php в текущей директории.</p>
    <p>Содержание этого файла можно увидеть ниже:</p>

    <pre class="brush: csharp;">
    &lt;?php
    /**
     * Файл конфигурации команды консоли "yii asset".
     * Обратите внимание, что в консольной среде, некоторые псевдонимы путей, такие как "@webroot' и '@web ",
     * не могут быть использованы.
     * Пожалуйста, определите отсутствующие псевдонимы путей.
     */
    return [
        // Настроить команду/обратный вызов для сжатия файлов JavaScript:
        'jsCompressor' =&gt; 'java -jar compiler.jar --js {from} --js_output_file {to}',
        // Настроить команду/обратный вызов для сжатия файлов CSS:
        'cssCompressor' =&gt; 'java -jar yuicompressor.jar --type css {from} -o {to}',
        // Whether to delete asset source after compression:
        'deleteSource' =&gt; false,
        // Список комплектов ресурсов для сжатия:
        'bundles' =&gt; [
            // 'yii\web\YiiAsset',
            // 'yii\web\JqueryAsset',
        ],
        // Комплект ресурса после сжатия:
        'targets' =&gt; [
            'all' =&gt; [
                'class' =&gt; 'yii\web\AssetBundle',
                'basePath' =&gt; '@webroot/assets',
                'baseUrl' =&gt; '@web/assets',
                'js' =&gt; 'js/all-{hash}.js',
                'css' =&gt; 'css/all-{hash}.css',
            ],
        ],
        // Настройка менеджера ресурсов:
        'assetManager' =&gt; [
        ],
    ];
    </pre>

    <p>Вы должны изменить этот файл и указать в bundles параметре, какие комплекты Вы планируете объединить.</p>
    <p>В параметре targets вы должны указать, как комплекты должны быть поделены в группы.</p>
    <p>Вы можете указать одну или несколько групп, как уже было сказано выше.</p>
    <p><b>Примечание:</b> Так как псевдонимы путей @webroot и @web не могут быть использованы в консольном приложении, Вы должны явно задать их в файле конфигурации.</p>
    <p>JavaScript файлы объединены, сжаты и записаны в js/all-{hash}.js, где {hash} перенесён из хэша результирующего файла.</p>
    <p>Параметры jsCompressor и cssCompressor указывают на консольные команды или обратный вызов PHP, выполняющие JavaScript и CSS объединение/сжатие.</p>
    <p>По умолчанию Yii использует Closure Compiler для объединения JavaScript файлов и YUI Compressor для объединения CSS файлов.</p>
    <p>Вы должны установить эти инструменты вручную или настроить данные параметры, чтобы использовать ваши любимые инструменты.</p>
    <p>Вы можете запустить команду asset с файлом конфигурации для объединения и сжатия файлов ресурсов, а затем создать новый файл конфигурации комплекта ресурса assets-prod.php:</p>

    <pre class="brush: csharp;">
    yii asset assets.php config/assets-prod.php
    </pre>

    <p>Сгенерированный файл конфигурации может быть включен в конфигурацию приложения, как описано в последнем подразделе.</p>
    <p><b>Примечание:</b> в случае если вы перенастраиваете комплекты ресурсов через [[yii\web\AssetManager::bundles]] или [[yii\web\AssetManager::assetMap]], и хотите, чтобы эти настройки применились для исходных файлов для сжатия, вы должны занести эти опции в раздел assetManager файла кофигурации для команды asset.</p>
    <p><b>Замечание:</b> составляя набор исходных комплектов ресурсов для сжатия, следует избегать использования таких, чьи параметры могут изменяться динамически (т.е. на уровне метода init() или после регистрации), поскольку они могут функционировать неправильно после сжатия.</p>
    <p><b>Для справки:</b> Команда asset является не единственной опцией для автоматического процесса объединения и сжатия ресурсов.</p>
    <p>Вы можете также использовать такой замечательный инструмент запуска приложений как grunt для достижения той же цели.</p>

    <h3 id="title">
        Группировка Комплектов Ресурсов
    </h3>

    <p>В последнем подразделе, мы пояснили, как объединять все комплекты ресурсов в единый в целях минимизации HTTP запросов для файлов ресурсов, упоминавшихся в приложении.</p>
    <p>Это не всегда желательно на практике.</p>
    <p>Например, представьте себе, что Ваше приложение содержит "front end", а также и "back end", каждый из которых использует свой набор JavaScript и CSS файлов.</p>
    <p>В этом случае, объединение всех комплектов ресурсов с обеих сторон в один не имеет смысла потому, что комплекты ресурсов для "front end" не используются в "back end", и это будет бесполезной тратой трафика - отправлять "back end" ресурсы, когда страница из "front end" будет запрошена.</p>
    <p>Для решения вышеуказанной проблемы, вы можете разделить комплекты по группам и объединить комплекты ресурсов для каждой группы.</p>
    <p>Следующая конфигурация показывает, как Вы можете объединять комплекты ресурсов:</p>

    <pre class="brush: csharp;">
    return [
        ...
        // Укажите выходной комплект для групп:
        'targets' =&gt; [
            'allShared' =&gt; [
                'js' =&gt; 'js/all-shared-{hash}.js',
                'css' =&gt; 'css/all-shared-{hash}.css',
                'depends' =&gt; [
                    // Включаем все ресурсы поделённые между 'backend' и 'frontend'
                    'yii\web\YiiAsset',
                    'app\assets\SharedAsset',
                ],
            ],
            'allBackEnd' =&gt; [
                'js' =&gt; 'js/all-{hash}.js',
                'css' =&gt; 'css/all-{hash}.css',
                'depends' =&gt; [
                    // Включаем только 'backend' ресурсы:
                    'app\assets\AdminAsset'
                ],
            ],
            'allFrontEnd' =&gt; [
                'js' =&gt; 'js/all-{hash}.js',
                'css' =&gt; 'css/all-{hash}.css',
                'depends' =&gt; [], // Включаем все оставшиеся ресурсы
            ],
        ],
        ...
    ];
    </pre>

    <p>Как вы можете видеть, комплекты ресурсов поделены на три группы: allShared, allBackEnd и allFrontEnd.</p>
    <p>Каждая из которых зависит от соответствующего набора комплектов ресурсов.</p>
    <p>Например, allBackEnd зависит от app\assets\AdminAsset.</p>
    <p>При запуске команды asset с данной конфигурацией будут объединены комплекты ресурсов согласно приведенной выше спецификации.</p>
    <p><b>Для справки:</b> Вы можете оставить depends конфигурацию пустой для одного из намеченных комплектов.</p>
    <p>Поступая таким образом, данный комплект ресурсов будет зависеть от всех остальных комплектов ресурсов, от которых другие целевые комплекты не зависят.</p>

	<script src="../../../../js/progressBarSetIni.js" type="text/javascript"></script>

        <div id="lessMenu" style="margin: 30px 0 0 0;">
            <hr />
            <a href="19.html"><div id="exitLess" ontouchstart="return true;"><img src="../../../../img/menu/pr.png" /></div></a>
            <a href="21.html"><div id="aaLess" ontouchstart="return true;"><img src="../../../../img/menu/ne.png" /></div></a>
        </div>

    </div>

    <script type="text/javascript" src="../../../../cordova.js"></script>
    <script type="text/javascript" src="../../../../js/global.js"></script>
    <script type="text/javascript">
        changeColor();
        if (localStorage.getItem("fSize") < 1) { fSize = 16; localStorage.setItem("fSize", 16); } else { fSize = localStorage.getItem("fSize"); }
        document.getElementById("pageBody").style.fontSize = fSize + "px";

        // goBackMenu
        document.addEventListener("backbutton", goBackMenu, false);
        function goBackMenu()
        {
            window.location.href = 'list.html';
        }

        function changeColor()
        {
            if (localStorage.getItem("colorSheme") <= 1)
            {
                document.getElementById("pageBody").style.backgroundColor = localStorage.getItem("#f0f0f0");
            }

            if (localStorage.getItem("colorSheme") == 2)
            {
                document.getElementById("pageBody").style.backgroundColor = localStorage.getItem("#212121");
                document.getElementById("pageBody").style.color = localStorage.getItem("#efefef");
            }

            if (localStorage.getItem("colorSheme") == 3)
            {
                document.getElementById("pageBody").style.backgroundColor = localStorage.getItem("#efe4d0");
            }
        }

        // bm
        if (localStorage.getItem("arrs") != null)
        {
            var arrs = JSON.parse(localStorage.getItem("arrs"));
        }
        else
        {
            var arrs = [];
        }

        var names = ["../acharter/ru/yii/yii2/20.html", "Yii2: Ресурсы", "bm1226"];

        function setzBm() { arrs.push(names); localStorage.setItem("arrs", JSON.stringify(arrs)); localStorage.setItem("bm1226", 1); RefBms(); }

        window.onload = function() { RefBms(); }

        function RefBms()
        {
            if (localStorage.getItem("bm1226") == 1) { document.getElementById("bma1226").style.display = "block"; document.getElementById("bm1226").style.display = "none"; } else { document.getElementById("bma1226").style.display = "none"; document.getElementById("bm1226").style.display = "block"; }
        }

        function dellBm() { for (var i = 0; i < arrs.length; i++) { if (arrs[i].indexOf("Yii2: Ресурсы") == 1) { arrs.splice(i, 1); localStorage.setItem("bm1226", 0); RefBms(); localStorage.setItem("arrs", JSON.stringify(arrs)); } } }

        // sub menu
        var serTimeToClose = 1000;
        
        function OpenSettMenu()
        {
            document.getElementById("subMenuInLess").style.display = "block";
            timeToEvAct();
            serTimeToClose = 1;
        }
        
        function timeToEvAct()
        {
            setTimeout(function() { serTimeToClose = 0 }, 100);
        }
        
        window.addEventListener('click', function(e){
        
            if (serTimeToClose <= 0)
            {
                if (document.getElementById('subMenuInLess').contains(e.target))
                {
                    //
                }
                else
                {
                    document.getElementById("subMenuInLess").style.display = "none";
                }
            }
        });

    </script>

</body>
</html>
